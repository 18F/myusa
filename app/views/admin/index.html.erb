<div class="row aglio app-settings">
  <div class="col-md-3">
    <%= render 'profiles/nav'%>
  </div>
  <div class="col-md-9">
    <h1>
      Applications
    </h1>
    <h2>
      Public Approval Pending
    </h2>

    <table class="table table-striped">
      <thead>
      <tr>
        <th>Name</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
      </thead>
      <tbody>
      <% if @applications.blank? %>
        <tr>
          <td colspan="3">
            there are no applicaitons pending approval
          </td>
        </tr>
      <% end %>
      <% @applications.each do |application| %>
        <tr id="application_<%= application.id %>">
          <td><%= link_to application.name, edit_oauth_application_path(application) %></td>
          <td><%= app_status(application) %></td>
          <td>
            <%= form_tag new_api_key_path, method: :post do %>
              <%= hidden_field_tag(:id, application.id) %>
              <%= submit_tag 'New API Key',
                onclick: "return confirm('Are you sure you want to generate a new client secret key?')",
                class: 'btn btn-link' %>
            <% end %>
            <%= link_to 'Edit Application', edit_oauth_application_path(application), class: 'btn btn-link' %>
            <% if !application.public && application.requested_public_at.nil? %>
              <%= form_tag make_public_path, method: :post do %>
                <%= hidden_field_tag(:id, application.id) %>
                <%= submit_tag 'Request Public Access', class: 'btn btn-link' %>
              <% end %>
            <% end %>
            <%= render 'doorkeeper/authorizations/delete_form', application: application %>
          </td>
        </tr>
      <% end %>
      </tbody>
    </table>
  </div>
</div>
